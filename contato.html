<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contato — BrazilTrad</title>

  <link rel="stylesheet" href="css/style.css">

  <style>
    body {
      background:#f2f5f7;
      font-family: Inter, Arial, sans-serif;
      padding:40px 0;
    }

    .container {
      max-width: 520px;
      margin: 0 auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    h1 {
      text-align: center;
      margin-bottom: 5px;
      font-size: 28px;
      color:#0F4C5C;
    }

    p.desc {
      text-align:center;
      margin-top:0;
      margin-bottom:25px;
      color:#555;
    }

    label {
      display: block;
      margin-top: 14px;
      font-weight: 600;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }

    button {
      margin-top: 22px;
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }

    #sendBtn {
      background:#0F4C5C;
      color:#fff;
    }
    #sendBtn:hover {
      background:#12697A;
    }

    #backBtn {
      background:#063F4E;
      color:#fff;
      margin-top:14px;
      display:none; /* só aparece após sucesso */
    }

    .msg {
      margin-top:18px;
      text-align:center;
      font-weight:600;
      display:none;
    }
    .success { color:#008f4c; }
    .error { color:#c62828; }
  </style>
</head>
<body>

<div class="container">
  <h1>Contato</h1>
  <p class="desc">Preencha o formulário abaixo e entraremos em contacto.</p>

  <form id="contactForm">
    <label>Nome *</label>
    <input type="text" name="name" required>

    <label>E-mail *</label>
    <input type="email" name="email" required>

    <label>Empresa (opcional)</label>
    <input type="text" name="company">

    <label>Mensagem *</label>
    <textarea name="message" rows="5" required></textarea>

    <button id="sendBtn" type="submit">Enviar</button>

    <button id="backBtn" type="button">Voltar ao site</button>

    <div id="formMsg" class="msg"></div>
  </form>
</div>

<script>
document.getElementById("contactForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;
  const sendBtn = document.getElementById("sendBtn");
  const backBtn = document.getElementById("backBtn");
  const msgBox = document.getElementById("formMsg");

  sendBtn.disabled = true;
  msgBox.style.display = "none";

  const name = form.name.value;
  const email = form.email.value;
  const company = form.company.value || "";
  const message = form.message.value;

  try {
      /* ---------------------------------------------
         1) ENVIAR PARA O ZOHO
      --------------------------------------------- */
      const zohoUrl = "https://crm.zoho.com/crm/WebToLeadForm";
      const zohoForm = new FormData();

      zohoForm.append("xnQsjsdp","3fd1731c66fbf93ea4e8cba470a7d2c3236fa48b9105a4c2e169800c6460cf13");
      zohoForm.append("xmIwtLD","55bb49f2537e4ee9c2c0d22cdebef9a489a974853af1926bb998412b493ac61ffb6464561e419055979737b7f25d38f3");
      zohoForm.append("actionType","TGVhZHM=");
      zohoForm.append("returnURL","null");

      zohoForm.append("Last Name", name);
      zohoForm.append("Email", email);
      zohoForm.append("Company", company);
      zohoForm.append("Description", message);

      await fetch(zohoUrl, { method:"POST", body:zohoForm });


      /* ---------------------------------------------
         2) EMAIL PARA O LEAD
      --------------------------------------------- */
      const leadEmail = new FormData();
      leadEmail.append("access_key","36b646fd-5467-4ff8-8a3a-9df90aae76fe");
      leadEmail.append("subject","Recebemos sua mensagem — BrazilTrad");
      leadEmail.append("recipient", email); // ← agora envia para o lead
      leadEmail.append("from_name","BrazilTrad");
      leadEmail.append("message",
        `Olá ${name},<br><br>
        Recebemos a sua mensagem e entraremos em contacto muito em breve.<br><br>
        Obrigado,<br>BrazilTrad`
      );

      await fetch("https://api.web3forms.com/submit", {
        method:"POST",
        body: leadEmail
      });


      /* ---------------------------------------------
         3) EMAIL INTERNO PARA RUI
      --------------------------------------------- */
      const internalEmail = new FormData();
      internalEmail.append("access_key","36b646fd-5467-4ff8-8a3a-9df90aae76fe");
      internalEmail.append("subject","Novo contato recebido — BrazilTrad");
      internalEmail.append("recipient","rsequeira@braziltrad.com");
      internalEmail.append("from_name","BrazilTrad");

      internalEmail.append("message",
        `Novo contato recebido:<br><br>
        <b>Nome:</b> ${name}<br>
        <b>Email:</b> ${email}<br>
        <b>Empresa:</b> ${company}<br><br>
        <b>Mensagem:</b><br>${message}`
      );

      await fetch("https://api.web3forms.com/submit", {
        method:"POST",
        body: internalEmail
      });


      /* ---------------------------------------------
         SUCESSO
      --------------------------------------------- */
      msgBox.textContent = "Mensagem enviada com sucesso!";
      msgBox.className = "msg success";
      msgBox.style.display = "block";

      form.reset();

      backBtn.style.display = "block";
      sendBtn.disabled = false;


  } catch (error) {
      msgBox.textContent = "Erro ao enviar. Tente novamente.";
      msgBox.className = "msg error";
      msgBox.style.display = "block";
      sendBtn.disabled = false;
  }
});


/* ---------------------------------------------
   BOTÃO VOLTAR AO SITE
--------------------------------------------- */
document.getElementById("backBtn").addEventListener("click", () => {
    window.history.back();
});
</script>

</body>
</html>

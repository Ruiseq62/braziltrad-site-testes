<!-- ===== BOT√ÉO MULTIL√çNGUA ===== -->
<button id="langBtn" class="lang-btn">üåé üáßüá∑ PT</button>

<!-- ===== SCRIPT DO BOT√ÉO E DAS BARRAS ===== -->
<script>
  const langOrder = ["pt", "en", "es", "zh"];
  const flag = { pt: "üáßüá∑", en: "üá¨üáß", es: "üá™üá∏", zh: "üá®üá≥" };
  let langIndex = 0;

  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("langBtn");
    const saved = localStorage.getItem("bt_lang");
    if (saved && langOrder.includes(saved)) langIndex = langOrder.indexOf(saved);

    function setLang(code) {
      localStorage.setItem("bt_lang", code);
      btn.textContent = `üåé ${flag[code]} ${code.toUpperCase()}`;
      document.documentElement.lang = code;
      loadTradingViewWidgets(code);
    }

    btn.addEventListener("click", () => {
      langIndex = (langIndex + 1) % langOrder.length;
      setLang(langOrder[langIndex]);
    });

    setLang(langOrder[langIndex]);
  });

  /* ===== INSER√á√ÉO DAS DUAS BARRAS TRADINGVIEW COM LOGOTIPO ===== */
  function loadTradingViewWidgets(lang = "pt") {
    document.querySelectorAll(".tv-widget").forEach(c => c.remove());

    /* ===== Barra 1: √çndices e Moedas ===== */
    const bar1 = document.createElement("div");
    bar1.className = "tradingview-widget-container main-bar tv-widget";
    bar1.innerHTML = `
      <a href="https://braziltrad.com" target="_blank" class="tv-logo-link">
        <img src="./assets/img/braziltrad-logo.png" alt="BrazilTrad" class="tv-logo">
      </a>
      <div class="tradingview-widget-container__widget"></div>
      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
      {
        "symbols": [
          { "proName": "FOREXCOM:EURUSD", "title": "EUR/USD" },
          { "proName": "FOREXCOM:USDJPY", "title": "USD/JPY" },
          { "proName": "OANDA:SPX500USD", "title": "S&P 500" },
          { "proName": "NASDAQ:NDX", "title": "NASDAQ 100" },
          { "proName": "BITSTAMP:BTCUSD", "title": "Bitcoin" },
          { "proName": "BITSTAMP:ETHUSD", "title": "Ethereum" }
        ],
        "showSymbolLogo": true,
        "colorTheme": "light",
        "isTransparent": false,
        "displayMode": "adaptive",
        "locale": "${lang}"
      }
      <\/script>`;
    document.body.prepend(bar1);

    /* ===== Barra 2: Commodities ===== */
    const bar2 = document.createElement("div");
    bar2.className = "tradingview-widget-container commodities-bar tv-widget";
    bar2.innerHTML = `
      <a href="https://braziltrad.com" target="_blank" class="tv-logo-link">
        <img src="./assets/img/braziltrad-logo.png" alt="BrazilTrad" class="tv-logo">
      </a>
      <div class="tradingview-widget-container__widget"></div>
      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
      {
        "symbols": [
          { "proName": "COMEX:GC1!", "title": "Ouro" },
          { "proName": "ICEEUR:BRN1!", "title": "Petr√≥leo Brent" },
          { "proName": "CBOT:ZS1!", "title": "Soja" },
          { "proName": "ICEUS:KC1!", "title": "Caf√©" },
          { "proName": "ICEUS:SB1!", "title": "A√ß√∫car" },
          { "proName": "ICEUS:CT1!", "title": "Algod√£o" },
          { "proName": "COMEX:HG1!", "title": "Cobre" },
          { "proName": "SGX:FEF1!", "title": "Min√©rio de Ferro" }
        ],
        "showSymbolLogo": true,
        "colorTheme": "light",
        "isTransparent": false,
        "displayMode": "adaptive",
        "locale": "${lang}"
      }
      <\/script>`;
    document.body.prepend(bar2);
  }
</script>

<!-- ===== ESTILOS EXTRAS PARA LOGO E BOT√ÉO ===== -->
<style>
  .tv-logo-link {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    z-index: 99999;
  }

  .tv-logo {
    height: 22px;
    width: auto;
    opacity: 0.9;
    transition: opacity 0.2s ease;
  }

  .tv-logo:hover { opacity: 1; }

  /* Bot√£o multil√≠ngua flutuante abaixo da barra superior */
  .lang-btn {
    position: fixed;
    top: 85px;
    right: 18px;
    height: 32px;
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 25px;
    padding: 0 14px;
    font-size: 14px;
    font-weight: 500;
    color: #0F4C5C;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    z-index: 100000;
    transition: all 0.25s ease-in-out;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  }

  .lang-btn:hover {
    background: #f9f9f9;
    transform: translateY(-1px);
  }

  /* Ajustes das barras para o logotipo */
  .tradingview-widget-container.main-bar,
  .tradingview-widget-container.commodities-bar {
    position: fixed;
    left: 0;
    width: 100%;
    background: #ffffff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    height: 38px;
    z-index: 9999;
  }

  .tradingview-widget-container.main-bar { top: 0; }
  .tradingview-widget-container.commodities-bar { top: 38px; }

  body { margin-top: 85px !important; }
</style>

</body>
</html>

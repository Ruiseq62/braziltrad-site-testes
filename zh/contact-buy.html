<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>购买 — BrazilTrad</title>
  <link rel="stylesheet" href="../css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
  <div class="container" style="max-width:700px;margin:60px auto;background:#fff;padding:30px 40px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.08)">
    <h2 style="color:#004b5c;text-align:center;margin-bottom:25px">购买</h2>
    <form id="contact-form">
      <label>姓名</label>
      <input type="text" id="name" required>
      <label>电子邮件</label>
      <input type="email" id="email" required>

      <div class="grid">
        <div>
          <label>产品</label>
          <select id="product">
            <option>大豆</option><option>玉米</option><option>糖</option><option>咖啡</option><option>锂</option><option>铜</option><option>其他</option>
          </select>
        </div>
        <div>
          <label>预计数量（吨）</label>
          <input type="number" id="quantity">
        </div>
      </div>

      <label>目的地 / 港口</label>
      <input type="text" id="destination">

      <label>留言 / 需求</label>
      <textarea id="message" rows="5" required></textarea>

      <button type="submit" class="button">发送询盘</button>
      <p id="form-status" style="text-align:center;margin-top:10px;"></p>
    </form>
  </div>

  <script>
    (function(){ emailjs.init({ publicKey:"c4B9inNGyjZO4lvDy" }); })();
    document.getElementById("contact-form").addEventListener("submit", function(e){
      e.preventDefault();
      const s=document.getElementById("form-status");
      s.textContent="正在发送…"; s.style.color="#004b5c";
      const subject="[购买] "+document.getElementById("product").value+" — "+(document.getElementById("quantity").value||"未填")+" 吨";

      emailjs.send("service_swyd6le","template_hslmzyd_cn",{
        from_name: document.getElementById("name").value,
        from_email: document.getElementById("email").value,
        subject: subject,
        message:
          "产品: "+document.getElementById("product").value+"\n"+
          "数量(吨): "+(document.getElementById("quantity").value||"未填")+"\n"+
          "目的地: "+(document.getElementById("destination").value||"未填")+"\n\n"+
          (document.getElementById("message").value||"")
      }).then(()=>{
        emailjs.send("service_swyd6le","template_autoreply_braziltrad_cn",{
          from_name: document.getElementById("name").value,
          from_email: document.getElementById("email").value
        });
        s.textContent="已发送！"; s.style.color="green";
        document.getElementById("contact-form").reset();
      },(err)=>{ console.error(err); s.textContent="发送失败，请重试。"; s.style.color="red"; });
    });
  </script>
</body>
</html>
